{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport const fetchPhotosByQuery = async (searchedQuery,currentPage) => {\n\n  const axiosOptions = {\n    params: {\n    key: '48318728-33e02a537f20daf55b07c1f54',\n    q: searchedQuery.trim(),\n    page: currentPage,\n    per_page: 15,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  }\n  }\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/`, axiosOptions);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error.message);\n    throw error;\n  }\n};","export const createGalleryTemplate = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => `\n  <div class=\"photo-card\">\n    <a href=\"${largeImageURL}\" class=\"photo-link\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n    </a>\n    <div class=\"info\">\n      <p><b>Likes:</b> ${likes}</p>\n      <p><b>Views:</b> ${views}</p>\n      <p><b>Comments:</b> ${comments}</p>\n      <p><b>Downloads:</b> ${downloads}</p>\n    </div>\n  </div>`;","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\nimport { createGalleryTemplate } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport './css/loader.css';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.js-load-more-btn');\n\nlet page = 1;\nlet searchedQuery = '';\nlet totalHits = 0;\n\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nloadMoreBtnEl.classList.add('is-hidden');\n\nconst loadImages = (showTotalImagesMessage = false) => {\n  loaderEl.style.display = 'block';\n\n  fetchPhotosByQuery(searchedQuery, page)\n    .then(data => {\n      if (!data.hits || data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        loadMoreBtnEl.classList.add('is-hidden');\n        return;\n      }\n\n      const galleryTemplate = data.hits.map(el => createGalleryTemplate(el)).join('');\n      galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n      totalHits = data.totalHits;\n\n      if (showTotalImagesMessage) {\n        iziToast.success({\n          title: 'Success',\n          message: `Found ${totalHits} images.`,\n        });\n      }\n\n      if (page * 15 >= totalHits) {\n        loadMoreBtnEl.classList.add('is-hidden');\n        iziToast.info({\n          title: 'Info',\n          message: 'You have reached the end of search results.',\n        });\n      } else {\n        loadMoreBtnEl.classList.remove('is-hidden');\n      }\n\n      lightbox.refresh();\n\n      const { height: cardHeight } = galleryEl.firstElementChild.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    })\n    .catch(err => {\n      console.error('Error fetching photos:', err);\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again later!',\n      });\n    })\n    .finally(() => {\n      loaderEl.style.display = 'none';\n    });\n};\n\nconst onSearchFormSubmit = event => {\n  event.preventDefault();\n  galleryEl.innerHTML = '';\n  page = 1;\n  totalHits = 0;\n\n  searchedQuery = event.currentTarget.elements.user_query.value.trim();\n\n  if (searchedQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term!',\n    });\n    loadMoreBtnEl.classList.add('is-hidden');\n    return;\n  }\n\n  loadImages(true);\n};\n\nconst onLoadMoreBtnClick = () => {\n  page += 1;\n  loadImages();\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["fetchPhotosByQuery","searchedQuery","currentPage","axiosOptions","axios","error","createGalleryTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchFormEl","galleryEl","loaderEl","loadMoreBtnEl","page","totalHits","lightbox","SimpleLightbox","loadImages","showTotalImagesMessage","data","iziToast","galleryTemplate","el","cardHeight","err","onSearchFormSubmit","event","onLoadMoreBtnClick"],"mappings":"owBACO,MAAMA,EAAqB,MAAOC,EAAcC,IAAgB,CAErE,MAAMC,EAAe,CACnB,OAAQ,CACR,IAAK,qCACL,EAAGF,EAAc,KAAM,EACvB,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,MACb,CACA,EAED,GAAI,CAEF,OADiB,MAAME,EAAM,IAAI,2BAA4BD,CAAY,GACzD,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,uBAAwBA,EAAM,OAAO,EAC7CA,CACP,CACH,ECtBaC,EAAwB,CAAC,CACpC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,IAAM;AAAA;AAAA,eAESL,CAAa;AAAA,kBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,yBAGnBC,CAAK;AAAA,yBACLC,CAAK;AAAA,4BACFC,CAAQ;AAAA,6BACPC,CAAS;AAAA;AAAA,UCThCC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAgB,SAAS,cAAc,mBAAmB,EAEhE,IAAIC,EAAO,EACPjB,EAAgB,GAChBkB,EAAY,EAEhB,MAAMC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEDJ,EAAc,UAAU,IAAI,WAAW,EAEvC,MAAMK,EAAa,CAACC,EAAyB,KAAU,CACrDP,EAAS,MAAM,QAAU,QAEzBhB,EAAmBC,EAAeiB,CAAI,EACnC,KAAKM,GAAQ,CACZ,GAAI,CAACA,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CACxCC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0EACnB,CAAS,EACDR,EAAc,UAAU,IAAI,WAAW,EACvC,MACD,CAED,MAAMS,EAAkBF,EAAK,KAAK,IAAIG,GAAMrB,EAAsBqB,CAAE,CAAC,EAAE,KAAK,EAAE,EAC9EZ,EAAU,mBAAmB,YAAaW,CAAe,EAEzDP,EAAYK,EAAK,UAEbD,GACFE,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,SAASN,CAAS,UACrC,CAAS,EAGCD,EAAO,IAAMC,GACfF,EAAc,UAAU,IAAI,WAAW,EACvCQ,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6CACnB,CAAS,GAEDR,EAAc,UAAU,OAAO,WAAW,EAG5CG,EAAS,QAAO,EAEhB,KAAM,CAAE,OAAQQ,CAAU,EAAKb,EAAU,kBAAkB,wBAC3D,OAAO,SAAS,CACd,IAAKa,EAAa,EAClB,SAAU,QAClB,CAAO,CACP,CAAK,EACA,MAAMC,GAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAG,EAC3CJ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACjB,CAAO,CACP,CAAK,EACA,QAAQ,IAAM,CACbT,EAAS,MAAM,QAAU,MAC/B,CAAK,CACL,EAEMc,EAAqBC,GAAS,CAQlC,GAPAA,EAAM,eAAc,EACpBhB,EAAU,UAAY,GACtBG,EAAO,EACPC,EAAY,EAEZlB,EAAgB8B,EAAM,cAAc,SAAS,WAAW,MAAM,OAE1D9B,IAAkB,GAAI,CACxBwB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACf,CAAK,EACDR,EAAc,UAAU,IAAI,WAAW,EACvC,MACD,CAEDK,EAAW,EAAI,CACjB,EAEMU,EAAqB,IAAM,CAC/Bd,GAAQ,EACRI,GACF,EAEAR,EAAa,iBAAiB,SAAUgB,CAAkB,EAC1Db,EAAc,iBAAiB,QAASe,CAAkB"}